(()=>{var e={};e.id=625,e.ids=[220,625,636],e.modules={237:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},491:e=>{"use strict";e.exports=JSON.parse('[{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"type":"function"}]')},1131:(e,t,n)=>{"use strict";n.d(t,{M:()=>r,c:()=>u});var a=n(8732),i=n(2015);let s=(0,i.createContext)(void 0);function r({children:e}){let[t,n]=(0,i.useState)([]),r=async e=>{n(t=>[...t,e]);try{await fetch("/api/tokens",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch{}};return(0,a.jsx)(s.Provider,{value:{tokens:t,addToken:r},children:e})}function u(){let e=(0,i.useContext)(s);if(!e)throw Error("useTokens must be used within TokensProvider");return e}},1413:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},1485:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.r(t),n.d(t,{default:()=>f});var i=n(8732),s=n(2015),r=n(9527),u=n(1131),p=n(1617),l=n(2758),o=n(5575),y=n(5954),d=n(3173),c=n(6493),m=n(3720),h=n(8101),b=e([r,l,o,y,d,h]);function f(){let{tokens:e,addToken:t}=(0,u.c)(),{pools:n,addPool:a}=(0,p.T)(),{poolFee:o}=(0,m.A)(),{provider:b,signer:f,account:x,connectWallet:T}=(0,h.v)(),[v,g]=(0,s.useState)(e[0]),[S,w]=(0,s.useState)(e[1]),[P,j]=(0,s.useState)(""),[M,k]=(0,s.useState)("");(0,s.useRef)(new Set);let[A,E]=(0,s.useState)(""),[C,I]=(0,s.useState)([]),[O,_]=(0,s.useState)(!1),q=async()=>{b&&P&&await (0,y.$)(b,v.address,c.bp,P)},W=async()=>{f&&P&&await (0,d.v)(f,v,S,P,o)},R=async t=>{if(t.preventDefault(),b){if(!r.ethers.isAddress(A))return void I([]);_(!0);try{let t=await (0,l.E)(b,A,e);I(t),t.forEach(e=>{a({token0:A,token1:e.token.address,fee:e.fee,pool:e.pool})})}catch{I([])}finally{_(!1)}}};return(0,i.jsxs)("main",{style:{padding:20},children:[(0,i.jsx)("h1",{children:"Cypherium DEX"}),(0,i.jsxs)("div",{children:["Connected: ",x?`${x.slice(0,6)}...${x.slice(-4)}`:"未接続"]}),(0,i.jsxs)("div",{style:{marginTop:30},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"From:"}),(0,i.jsx)("select",{value:v.symbol,onChange:t=>{let n=e.find(e=>e.symbol===t.target.value);n&&g(n)},children:e.map(e=>(0,i.jsx)("option",{value:e.symbol,children:e.symbol},e.symbol))}),(0,i.jsx)("input",{type:"number",value:P,onChange:e=>j(e.target.value),placeholder:"Amount"})]}),(0,i.jsxs)("div",{style:{marginTop:10},children:[(0,i.jsx)("label",{children:"To:"}),(0,i.jsx)("select",{value:S.symbol,onChange:t=>{let n=e.find(e=>e.symbol===t.target.value);n&&w(n)},children:e.map(e=>(0,i.jsx)("option",{value:e.symbol,children:e.symbol},e.symbol))})]}),(0,i.jsxs)("div",{style:{marginTop:10},children:[(0,i.jsx)("label",{children:"Expected Output:"}),(0,i.jsx)("div",{children:M?`${M} ${S.symbol}`:"-"})]}),(0,i.jsx)("button",{style:{marginTop:20},onClick:q,children:"Approve"}),(0,i.jsx)("button",{style:{marginTop:10},onClick:W,children:"Swap"}),(0,i.jsxs)("div",{style:{marginTop:30},children:[(0,i.jsx)("h2",{children:"Find Pools"}),(0,i.jsxs)("form",{onSubmit:R,style:{marginBottom:10},children:[(0,i.jsx)("input",{type:"text",placeholder:"ERC20 address",value:A,onChange:e=>E(e.target.value),style:{marginRight:10}}),(0,i.jsx)("button",{type:"submit",children:"Search"})]}),O&&(0,i.jsx)("p",{children:"Searching..."}),C.length>0?(0,i.jsx)("ul",{children:C.map((e,t)=>(0,i.jsxs)("li",{children:[A," / ",e.token.symbol," (fee ",e.fee,") - ",e.pool]},t))}):!O&&A&&(0,i.jsx)("p",{children:"No pools found"})]}),n.length>0&&(0,i.jsxs)("div",{style:{marginTop:30},children:[(0,i.jsx)("h2",{children:"Known Pools"}),(0,i.jsx)("ul",{children:n.map((e,t)=>(0,i.jsxs)("li",{children:[e.token0,"/",e.token1," (fee ",e.fee,") - ",e.pool]},t))})]})]})]})}[r,l,o,y,d,h]=b.then?(await b)():b,a()}catch(e){a(e)}})},1617:(e,t,n)=>{"use strict";n.d(t,{T:()=>u,v:()=>r});var a=n(8732),i=n(2015);let s=(0,i.createContext)(void 0);function r({children:e}){let[t,n]=(0,i.useState)([]),r=async e=>{n(t=>[...t,e]);try{await fetch("/api/pools",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch{}};return(0,a.jsx)(s.Provider,{value:{pools:t,addPool:r},children:e})}function u(){let e=(0,i.useContext)(s);if(!e)throw Error("usePools must be used within PoolsProvider");return e}},2015:e=>{"use strict";e.exports=require("react")},2326:e=>{"use strict";e.exports=require("react-dom")},2386:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.r(t),n.d(t,{default:()=>d});var i=n(8732);n(2768);var s=n(2754),r=n(1131),u=n(1617),p=n(8101),l=n(3720),o=n(8751),y=e([s,p]);[s,p]=y.then?(await y)():y;let d=(0,o.appWithTranslation)(function({Component:e,pageProps:t}){return(0,i.jsx)(r.M,{children:(0,i.jsx)(u.v,{children:(0,i.jsx)(l.S,{children:(0,i.jsxs)(p.r,{children:[(0,i.jsx)("div",{className:"background-logo"}),(0,i.jsx)(s.A,{}),(0,i.jsx)(e,{...t})]})})})})});a()}catch(e){a(e)}})},2754:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.d(t,{A:()=>y});var i=n(8732),s=n(9918),r=n.n(s),u=n(4233),p=n(8101),l=n(8751),o=e([p]);p=(o.then?(await o)():o)[0];let y=()=>{let e=(0,u.useRouter)(),{account:t,connectWallet:n}=(0,p.v)(),{t:a}=(0,l.useTranslation)("common");return(0,i.jsxs)("nav",{style:{display:"flex",gap:20,padding:"10px 20px",backgroundColor:"#f0f0f0",borderBottom:"1px solid #ccc"},children:[(0,i.jsx)(r(),{href:"/swap",style:{fontWeight:"/swap"===e.pathname?"bold":"normal"},children:a("swap")}),(0,i.jsx)(r(),{href:"/tokens",style:{fontWeight:"/tokens"===e.pathname?"bold":"normal"},children:a("tokens")}),(0,i.jsx)(r(),{href:"/pools",style:{fontWeight:"/pools"===e.pathname?"bold":"normal"},children:a("pools")}),(0,i.jsx)(r(),{href:"/dashboard",style:{fontWeight:"/dashboard"===e.pathname?"bold":"normal"},children:a("dashboard")}),(0,i.jsx)("div",{style:{marginLeft:"auto"},children:t?(0,i.jsx)("span",{children:(e=>`${e.slice(0,6)}...${e.slice(-4)}`)(t)}):(0,i.jsx)("button",{onClick:n,children:"Connect Wallet"})})]})};a()}catch(e){a(e)}})},2758:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.d(t,{E:()=>u});var i=n(9527),s=n(6493),r=e([i]);i=(r.then?(await r)():r)[0];let p=["function getPool(address tokenA, address tokenB, uint24 fee) external view returns (address)"];async function u(e,t,n){if(!s.Mo)throw Error("UNISWAP_V3_FACTORY_ADDRESS is not set");let a=new i.ethers.Contract(s.Mo,p,e),r=[500,3e3,1e4],u=[];for(let e of n)if(e.address.toLowerCase()!==t.toLowerCase())for(let n of r){let s=await a.getPool(t,e.address,n);s&&s!==i.ethers.ZeroAddress&&u.push({token:e,fee:n,pool:s})}return u}a()}catch(e){a(e)}})},2768:()=>{},3173:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.d(t,{v:()=>p});var i=n(9527),s=n(6493),r=n(8559),u=e([i]);async function p(e,t,n,a,u){let p=new i.ethers.Contract(s.bp,r,e),l=await e.provider?.getBlock("latest"),o=l?.timestamp??Math.floor(Date.now()/1e3),y={tokenIn:t.address,tokenOut:n.address,fee:u,recipient:await e.getAddress(),deadline:o+600,amountIn:i.ethers.parseUnits(a,t.decimals),amountOutMinimum:0,sqrtPriceLimitX96:0};return(await p.exactInputSingle(y)).wait()}i=(u.then?(await u)():u)[0],a()}catch(e){a(e)}})},3720:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,S:()=>r});var a=n(8732),i=n(2015);let s=(0,i.createContext)(void 0);function r({children:e}){let[t,n]=(0,i.useState)(.5),[r,u]=(0,i.useState)(3e3);return(0,a.jsx)(s.Provider,{value:{slippage:t,poolFee:r,setSlippage:n,setPoolFee:u},children:e})}function u(){let e=(0,i.useContext)(s);if(!e)throw Error("useDexSettings must be used within DexSettingsProvider");return e}},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4387:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.r(t),n.d(t,{config:()=>h,default:()=>y,getServerSideProps:()=>m,getStaticPaths:()=>c,getStaticProps:()=>d,reportWebVitals:()=>b,routeModule:()=>S,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>g,unstable_getStaticParams:()=>T,unstable_getStaticPaths:()=>x,unstable_getStaticProps:()=>f});var i=n(3885),s=n(237),r=n(1413),u=n(8874),p=n(2386),l=n(1485),o=e([p,l]);[p,l]=o.then?(await o)():o;let y=(0,r.M)(l,"default"),d=(0,r.M)(l,"getStaticProps"),c=(0,r.M)(l,"getStaticPaths"),m=(0,r.M)(l,"getServerSideProps"),h=(0,r.M)(l,"config"),b=(0,r.M)(l,"reportWebVitals"),f=(0,r.M)(l,"unstable_getStaticProps"),x=(0,r.M)(l,"unstable_getStaticPaths"),T=(0,r.M)(l,"unstable_getStaticParams"),v=(0,r.M)(l,"unstable_getServerProps"),g=(0,r.M)(l,"unstable_getServerSideProps"),S=new i.PagesRouteModule({definition:{kind:s.A.PAGES,page:"/swap",pathname:"/swap",bundlePath:"",filename:""},components:{App:p.default,Document:u.default},userland:l});a()}catch(e){a(e)}})},5575:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.d(t,{T:()=>u});var i=n(9527),s=n(6493),r=e([i]);i=(r.then?(await r)():r)[0];let p=["function quoteExactInputSingle(address tokenIn, address tokenOut, uint24 fee, uint256 amountIn, uint160 sqrtPriceLimitX96) external returns (uint256 amountOut, uint160 sqrtPriceX96After, uint32 initializedTicksCrossed, uint256 gasEstimate)"];async function u(e,t,n,a,r){let u=new i.ethers.Contract(s.Gy,p,e),l=i.ethers.parseUnits(a,t.decimals),{amountOut:o}=await u.quoteExactInputSingle(t.address,n.address,r,l,0);return i.ethers.formatUnits(o,n.decimals)}a()}catch(e){a(e)}})},5954:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.d(t,{$:()=>u});var i=n(9527),s=n(491),r=e([i]);async function u(e,t,n,a){let r=await e.getSigner(),u=new i.ethers.Contract(t,s,r),p=await u.decimals(),l=i.ethers.parseUnits(a,p);return(await u.approve(n,l)).wait()}i=(r.then?(await r)():r)[0],a()}catch(e){a(e)}})},6493:(e,t,n)=>{"use strict";n.d(t,{Gy:()=>s,Mo:()=>a,bF:()=>r,bp:()=>i});let a="0x84a4Ef6C41f3Ab726c3A2550d284E37b45FC25D0",i="0xaAB7A983Fc7EcA2fb601cCA7489E11d3945c6301",s="0xf7Edc0095eadb64F92d493a2a2d575f7B8b0810f",r="0x08157C8532CF753FE63C5403515cBa8f1235189A"},7910:e=>{"use strict";e.exports=require("stream")},8101:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.d(t,{r:()=>p,v:()=>l});var i=n(8732),s=n(2015),r=n(9527),u=e([r]);r=(u.then?(await u)():u)[0];let o=(0,s.createContext)(void 0);function p({children:e}){let[t,n]=(0,s.useState)(""),[a,u]=(0,s.useState)(),[p,l]=(0,s.useState)(),y=async()=>{let e=window.ethereum;if(!e)return alert("MetaMaskが見つかりません");let t=new r.ethers.BrowserProvider(e),a=await t.getSigner(),i=await a.getAddress();u(t),l(a),n(i)};return(0,i.jsx)(o.Provider,{value:{account:t,provider:a,signer:p,connectWallet:y},children:e})}function l(){let e=(0,s.useContext)(o);if(!e)throw Error("useWallet must be used within WalletProvider");return e}a()}catch(e){a(e)}})},8559:e=>{"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_factory","type":"address"},{"internalType":"address","name":"_WETH9","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"WETH9","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"bytes","name":"path","type":"bytes"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint256","name":"amountIn","type":"uint256"},{"internalType":"uint256","name":"amountOutMinimum","type":"uint256"}],"internalType":"struct ISwapRouter.ExactInputParams","name":"params","type":"tuple"}],"name":"exactInput","outputs":[{"internalType":"uint256","name":"amountOut","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"tokenIn","type":"address"},{"internalType":"address","name":"tokenOut","type":"address"},{"internalType":"uint24","name":"fee","type":"uint24"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint256","name":"amountIn","type":"uint256"},{"internalType":"uint256","name":"amountOutMinimum","type":"uint256"},{"internalType":"uint160","name":"sqrtPriceLimitX96","type":"uint160"}],"internalType":"struct ISwapRouter.ExactInputSingleParams","name":"params","type":"tuple"}],"name":"exactInputSingle","outputs":[{"internalType":"uint256","name":"amountOut","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[{"components":[{"internalType":"bytes","name":"path","type":"bytes"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint256","name":"amountOut","type":"uint256"},{"internalType":"uint256","name":"amountInMaximum","type":"uint256"}],"internalType":"struct ISwapRouter.ExactOutputParams","name":"params","type":"tuple"}],"name":"exactOutput","outputs":[{"internalType":"uint256","name":"amountIn","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"tokenIn","type":"address"},{"internalType":"address","name":"tokenOut","type":"address"},{"internalType":"uint24","name":"fee","type":"uint24"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint256","name":"amountOut","type":"uint256"},{"internalType":"uint256","name":"amountInMaximum","type":"uint256"},{"internalType":"uint160","name":"sqrtPriceLimitX96","type":"uint160"}],"internalType":"struct ISwapRouter.ExactOutputSingleParams","name":"params","type":"tuple"}],"name":"exactOutputSingle","outputs":[{"internalType":"uint256","name":"amountIn","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"factory","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes[]","name":"data","type":"bytes[]"}],"name":"multicall","outputs":[{"internalType":"bytes[]","name":"results","type":"bytes[]"}],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"refundETH","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"selfPermit","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"uint256","name":"expiry","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"selfPermitAllowed","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"uint256","name":"expiry","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"selfPermitAllowedIfNecessary","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"selfPermitIfNecessary","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amountMinimum","type":"uint256"},{"internalType":"address","name":"recipient","type":"address"}],"name":"sweepToken","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amountMinimum","type":"uint256"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"feeBips","type":"uint256"},{"internalType":"address","name":"feeRecipient","type":"address"}],"name":"sweepTokenWithFee","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"int256","name":"amount0Delta","type":"int256"},{"internalType":"int256","name":"amount1Delta","type":"int256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"uniswapV3SwapCallback","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amountMinimum","type":"uint256"},{"internalType":"address","name":"recipient","type":"address"}],"name":"unwrapWETH9","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amountMinimum","type":"uint256"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"feeBips","type":"uint256"},{"internalType":"address","name":"feeRecipient","type":"address"}],"name":"unwrapWETH9WithFee","outputs":[],"stateMutability":"payable","type":"function"},{"stateMutability":"payable","type":"receive"}]')},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},8751:e=>{"use strict";e.exports=require("next-i18next")},8874:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(8732),i=n(2341);function s(){return(0,a.jsxs)(i.Html,{lang:"en",children:[(0,a.jsx)(i.Head,{}),(0,a.jsxs)("body",{children:[(0,a.jsx)(i.Main,{}),(0,a.jsx)(i.NextScript,{})]})]})}},9021:e=>{"use strict";e.exports=require("fs")},9527:e=>{"use strict";e.exports=import("ethers")}};var t=require("../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),a=t.X(0,[89,124,341],()=>n(4387));module.exports=a})();